<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1228px" preserveAspectRatio="none" style="width:1243px;height:1228px;background:#FFFFFF;" version="1.1" viewBox="0 0 1243 1228" width="1243px" zoomAndPan="magnify"><defs><filter height="300%" id="f19ajopn6kajqo" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="554.5625" cy="20" fill="#000000" filter="url(#f19ajopn6kajqo)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="116" x="496.5625" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="96" x="506.5625" y="71.1387">Authorizer logic</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="143" x="483.0625" y="103.9688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="493.0625" y="125.1074">send input via stdin</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="302" x="403.5625" y="157.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="282" x="413.5625" y="179.0762">read request and send to operation selector</text><polygon fill="#FEFECE" filter="url(#f19ajopn6kajqo)" points="527.5625,211.9063,581.5625,211.9063,593.5625,223.9063,581.5625,235.9063,527.5625,235.9063,515.5625,223.9063,527.5625,211.9063" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="54" x="527.5625" y="227.7144">operation</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66" x="449.5625" y="221.312">== account</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="86" x="597.5625" y="221.312">== transaction</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="224" x="166.25" y="245.9063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="204" x="176.25" y="267.0449">send request to account service</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="205" x="175.75" y="299.875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="185" x="185.75" y="321.0137">account service read request</text><polygon fill="#FEFECE" filter="url(#f19ajopn6kajqo)" points="248.75,353.8438,307.75,353.8438,319.75,365.8438,307.75,377.8438,248.75,377.8438,236.75,365.8438,248.75,353.8438" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="248.75" y="369.6519">account ID</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="27" x="205.75" y="363.2495">exist</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="49" x="323.75" y="363.2495">not exist</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="281" x="11" y="387.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="261" x="21" y="408.9824">return account already initialized violation</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="145" x="332.5" y="387.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="125" x="342.5" y="408.9824">create new account</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="186" x="312" y="441.8125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="322" y="462.9512">save account in repository</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="245" x="708.375" y="245.9063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="225" x="718.375" y="267.0449">send request to transaction service</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="226" x="717.875" y="299.875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="206" x="727.875" y="321.0137">transaction service read request</text><polygon fill="#FEFECE" filter="url(#f19ajopn6kajqo)" points="801.375,353.8438,860.375,353.8438,872.375,365.8438,860.375,377.8438,801.375,377.8438,789.375,365.8438,801.375,353.8438" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="59" x="801.375" y="369.6519">account ID</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="49" x="736.375" y="363.2495">not exist</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="27" x="876.375" y="363.2495">exist</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="200" x="538" y="387.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="180" x="548" y="408.9824">return account not initialized</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="196" x="925.75" y="387.8438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="176" x="935.75" y="408.9824">create an array of violations</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="251" x="898.25" y="490.2148"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="231" x="908.25" y="511.3535">add card not active violation to array</text><polygon fill="#FEFECE" filter="url(#f19ajopn6kajqo)" points="993.75,441.8125,1053.75,441.8125,1065.75,453.8125,1053.75,465.8125,993.75,465.8125,981.75,453.8125,993.75,441.8125" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="1031.75" y="476.0229">false</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="60" x="993.75" y="457.6206">activeCard</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="1069.75" y="451.2183">true</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="254" x="896.75" y="614.5859"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="234" x="906.75" y="635.7246">add insufficient limit violation to array</text><polygon fill="#FEFECE" filter="url(#f19ajopn6kajqo)" points="966.75,566.1836,1080.75,566.1836,1092.75,578.1836,1080.75,590.1836,966.75,590.1836,954.75,578.1836,966.75,566.1836" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="1031.75" y="600.394">false</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="966.75" y="581.9917">has enough amount</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="1096.75" y="575.5894">true</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="367" x="840.25" y="738.957"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="347" x="850.25" y="760.0957">add high high-frequency-small-interval violation to array</text><polygon fill="#FEFECE" filter="url(#f19ajopn6kajqo)" points="920.75,690.5547,1126.75,690.5547,1138.75,702.5547,1126.75,714.5547,920.75,714.5547,908.75,702.5547,920.75,690.5547" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="1031.75" y="724.7651">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="206" x="920.75" y="706.3628">violate high-frequency-small-interval</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="1142.75" y="699.9604">false</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="284" x="881.75" y="863.3281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="264" x="891.75" y="884.4668">add doubled transaction violation to array</text><polygon fill="#FEFECE" filter="url(#f19ajopn6kajqo)" points="953.75,814.9258,1093.75,814.9258,1105.75,826.9258,1093.75,838.9258,953.75,838.9258,941.75,826.9258,953.75,814.9258" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="1031.75" y="849.1362">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="140" x="953.75" y="830.7339">is duplicated transaction</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="1109.75" y="824.3315">false</text><polygon fill="#FEFECE" filter="url(#f19ajopn6kajqo)" points="959.75,939.2969,1087.75,939.2969,1099.75,951.2969,1087.75,963.2969,959.75,963.2969,947.75,951.2969,959.75,939.2969" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="959.75" y="955.105">array violations != null</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="920.75" y="948.7026">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="1103.75" y="948.7026">false</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="279" x="768" y="973.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="259" x="778" y="994.4355">return a response with violated violations</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="146" x="1067" y="973.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="126" x="1077" y="994.4355">execute transaction</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="104" x="1088" y="1027.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="84" x="1098" y="1048.4043">save account</text><rect fill="#FEFECE" filter="url(#f19ajopn6kajqo)" height="33.9688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="180" x="464.5625" y="1135.2344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="160" x="474.5625" y="1156.373">send response via stdout</text><ellipse cx="554.5625" cy="1200.2031" fill="#FFFFFF" filter="url(#f19ajopn6kajqo)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="554.5625" cy="1200.2031" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="554.5625" x2="554.5625" y1="30" y2="50"/><polygon fill="#A80036" points="550.5625,40,554.5625,50,558.5625,40,554.5625,44" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="554.5625" x2="554.5625" y1="83.9688" y2="103.9688"/><polygon fill="#A80036" points="550.5625,93.9688,554.5625,103.9688,558.5625,93.9688,554.5625,97.9688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="554.5625" x2="554.5625" y1="137.9375" y2="157.9375"/><polygon fill="#A80036" points="550.5625,147.9375,554.5625,157.9375,558.5625,147.9375,554.5625,151.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="278.25" x2="278.25" y1="279.875" y2="299.875"/><polygon fill="#A80036" points="274.25,289.875,278.25,299.875,282.25,289.875,278.25,293.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="405" x2="405" y1="421.8125" y2="441.8125"/><polygon fill="#A80036" points="401,431.8125,405,441.8125,409,431.8125,405,435.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="236.75" x2="151.5" y1="365.8438" y2="365.8438"/><line style="stroke:#A80036;stroke-width:1.5;" x1="151.5" x2="151.5" y1="365.8438" y2="387.8438"/><polygon fill="#A80036" points="147.5,377.8438,151.5,387.8438,155.5,377.8438,151.5,381.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="319.75" x2="405" y1="365.8438" y2="365.8438"/><line style="stroke:#A80036;stroke-width:1.5;" x1="405" x2="405" y1="365.8438" y2="387.8438"/><polygon fill="#A80036" points="401,377.8438,405,387.8438,409,377.8438,405,381.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="151.5" x2="151.5" y1="421.8125" y2="493.7813"/><polygon fill="#A80036" points="147.5,483.7813,151.5,493.7813,155.5,483.7813,151.5,487.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="405" x2="405" y1="475.7813" y2="493.7813"/><polygon fill="#A80036" points="401,483.7813,405,493.7813,409,483.7813,405,487.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="151.5" x2="405" y1="493.7813" y2="493.7813"/><line style="stroke:#A80036;stroke-width:1.5;" x1="278.25" x2="278.25" y1="333.8438" y2="353.8438"/><polygon fill="#A80036" points="274.25,343.8438,278.25,353.8438,282.25,343.8438,278.25,347.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="830.875" x2="830.875" y1="279.875" y2="299.875"/><polygon fill="#A80036" points="826.875,289.875,830.875,299.875,834.875,289.875,830.875,293.875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="465.8125" y2="490.2148"/><polygon fill="#A80036" points="1019.75,480.2148,1023.75,490.2148,1027.75,480.2148,1023.75,484.2148" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1065.75" x2="1159.25" y1="453.8125" y2="453.8125"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1159.25" x2="1159.25" y1="453.8125" y2="546.1836"/><polygon fill="#A80036" points="1155.25,536.1836,1159.25,546.1836,1163.25,536.1836,1159.25,540.1836" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1159.25" x2="1023.75" y1="546.1836" y2="546.1836"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="546.1836" y2="551.1836"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="524.1836" y2="546.1836"/><polygon fill="#A80036" points="1019.75,536.1836,1023.75,546.1836,1027.75,536.1836,1023.75,540.1836" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="421.8125" y2="441.8125"/><polygon fill="#A80036" points="1019.75,431.8125,1023.75,441.8125,1027.75,431.8125,1023.75,435.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="590.1836" y2="614.5859"/><polygon fill="#A80036" points="1019.75,604.5859,1023.75,614.5859,1027.75,604.5859,1023.75,608.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1092.75" x2="1160.75" y1="578.1836" y2="578.1836"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1160.75" x2="1160.75" y1="578.1836" y2="670.5547"/><polygon fill="#A80036" points="1156.75,660.5547,1160.75,670.5547,1164.75,660.5547,1160.75,664.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1160.75" x2="1023.75" y1="670.5547" y2="670.5547"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="670.5547" y2="675.5547"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="648.5547" y2="670.5547"/><polygon fill="#A80036" points="1019.75,660.5547,1023.75,670.5547,1027.75,660.5547,1023.75,664.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="551.1836" y2="566.1836"/><polygon fill="#A80036" points="1019.75,556.1836,1023.75,566.1836,1027.75,556.1836,1023.75,560.1836" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="714.5547" y2="738.957"/><polygon fill="#A80036" points="1019.75,728.957,1023.75,738.957,1027.75,728.957,1023.75,732.957" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1138.75" x2="1217.25" y1="702.5547" y2="702.5547"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1217.25" x2="1217.25" y1="702.5547" y2="794.9258"/><polygon fill="#A80036" points="1213.25,784.9258,1217.25,794.9258,1221.25,784.9258,1217.25,788.9258" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1217.25" x2="1023.75" y1="794.9258" y2="794.9258"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="794.9258" y2="799.9258"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="772.9258" y2="794.9258"/><polygon fill="#A80036" points="1019.75,784.9258,1023.75,794.9258,1027.75,784.9258,1023.75,788.9258" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="675.5547" y2="690.5547"/><polygon fill="#A80036" points="1019.75,680.5547,1023.75,690.5547,1027.75,680.5547,1023.75,684.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="838.9258" y2="863.3281"/><polygon fill="#A80036" points="1019.75,853.3281,1023.75,863.3281,1027.75,853.3281,1023.75,857.3281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1105.75" x2="1175.75" y1="826.9258" y2="826.9258"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1175.75" x2="1175.75" y1="826.9258" y2="919.2969"/><polygon fill="#A80036" points="1171.75,909.2969,1175.75,919.2969,1179.75,909.2969,1175.75,913.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1175.75" x2="1023.75" y1="919.2969" y2="919.2969"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="919.2969" y2="924.2969"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="897.2969" y2="919.2969"/><polygon fill="#A80036" points="1019.75,909.2969,1023.75,919.2969,1027.75,909.2969,1023.75,913.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="799.9258" y2="814.9258"/><polygon fill="#A80036" points="1019.75,804.9258,1023.75,814.9258,1027.75,804.9258,1023.75,808.9258" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1140" x2="1140" y1="1007.2656" y2="1027.2656"/><polygon fill="#A80036" points="1136,1017.2656,1140,1027.2656,1144,1017.2656,1140,1021.2656" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="947.75" x2="907.5" y1="951.2969" y2="951.2969"/><line style="stroke:#A80036;stroke-width:1.5;" x1="907.5" x2="907.5" y1="951.2969" y2="973.2969"/><polygon fill="#A80036" points="903.5,963.2969,907.5,973.2969,911.5,963.2969,907.5,967.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1099.75" x2="1140" y1="951.2969" y2="951.2969"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1140" x2="1140" y1="951.2969" y2="973.2969"/><polygon fill="#A80036" points="1136,963.2969,1140,973.2969,1144,963.2969,1140,967.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="907.5" x2="907.5" y1="1007.2656" y2="1079.2344"/><polygon fill="#A80036" points="903.5,1069.2344,907.5,1079.2344,911.5,1069.2344,907.5,1073.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1140" x2="1140" y1="1061.2344" y2="1079.2344"/><polygon fill="#A80036" points="1136,1069.2344,1140,1079.2344,1144,1069.2344,1140,1073.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="907.5" x2="1140" y1="1079.2344" y2="1079.2344"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="924.2969" y2="939.2969"/><polygon fill="#A80036" points="1019.75,929.2969,1023.75,939.2969,1027.75,929.2969,1023.75,933.2969" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="789.375" x2="638" y1="365.8438" y2="365.8438"/><line style="stroke:#A80036;stroke-width:1.5;" x1="638" x2="638" y1="365.8438" y2="387.8438"/><polygon fill="#A80036" points="634,377.8438,638,387.8438,642,377.8438,638,381.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="872.375" x2="1023.75" y1="365.8438" y2="365.8438"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="365.8438" y2="387.8438"/><polygon fill="#A80036" points="1019.75,377.8438,1023.75,387.8438,1027.75,377.8438,1023.75,381.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="638" x2="638" y1="421.8125" y2="1097.2344"/><polygon fill="#A80036" points="634,1087.2344,638,1097.2344,642,1087.2344,638,1091.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1023.75" x2="1023.75" y1="1079.2344" y2="1097.2344"/><polygon fill="#A80036" points="1019.75,1087.2344,1023.75,1097.2344,1027.75,1087.2344,1023.75,1091.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="638" x2="1023.75" y1="1097.2344" y2="1097.2344"/><line style="stroke:#A80036;stroke-width:1.5;" x1="830.875" x2="830.875" y1="333.8438" y2="353.8438"/><polygon fill="#A80036" points="826.875,343.8438,830.875,353.8438,834.875,343.8438,830.875,347.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="515.5625" x2="278.25" y1="223.9063" y2="223.9063"/><line style="stroke:#A80036;stroke-width:1.5;" x1="278.25" x2="278.25" y1="223.9063" y2="245.9063"/><polygon fill="#A80036" points="274.25,235.9063,278.25,245.9063,282.25,235.9063,278.25,239.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="593.5625" x2="830.875" y1="223.9063" y2="223.9063"/><line style="stroke:#A80036;stroke-width:1.5;" x1="830.875" x2="830.875" y1="223.9063" y2="245.9063"/><polygon fill="#A80036" points="826.875,235.9063,830.875,245.9063,834.875,235.9063,830.875,239.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="278.25" x2="278.25" y1="493.7813" y2="1115.2344"/><polygon fill="#A80036" points="274.25,1105.2344,278.25,1115.2344,282.25,1105.2344,278.25,1109.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="830.875" x2="830.875" y1="1097.2344" y2="1115.2344"/><polygon fill="#A80036" points="826.875,1105.2344,830.875,1115.2344,834.875,1105.2344,830.875,1109.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="278.25" x2="830.875" y1="1115.2344" y2="1115.2344"/><line style="stroke:#A80036;stroke-width:1.5;" x1="554.5625" x2="554.5625" y1="191.9063" y2="211.9063"/><polygon fill="#A80036" points="550.5625,201.9063,554.5625,211.9063,558.5625,201.9063,554.5625,205.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="554.5625" x2="554.5625" y1="1115.2344" y2="1135.2344"/><polygon fill="#A80036" points="550.5625,1125.2344,554.5625,1135.2344,558.5625,1125.2344,554.5625,1129.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="554.5625" x2="554.5625" y1="1169.2031" y2="1189.2031"/><polygon fill="#A80036" points="550.5625,1179.2031,554.5625,1189.2031,558.5625,1179.2031,554.5625,1183.2031" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[116f728450d6173ff05e27fd5097a7e1]
@startuml
skinparam ConditionEndStyle hline

start
:Authorizer logic;

:send input via stdin;

:read request and send to operation selector;

if (operation) then ( == account)
    :send request to account service;
    :account service read request;
    if (account ID) then ( exist )
        :return account already initialized violation;
    else ( not exist )
        :create new account;
        :save account in repository;
    endif
else ( == transaction)
    :send request to transaction service;
    :transaction service read request;
    if (account ID) then ( not exist )
        :return account not initialized;
    else ( exist )
        :create an array of violations;
        if (activeCard) then ( false )
            :add card not active violation to array;
        else ( true )
        endif
        if (has enough amount) then ( false )
            :add insufficient limit violation to array;
        else ( true )
        endif
        if (violate high-frequency-small-interval) then ( true )
            :add high high-frequency-small-interval violation to array;
        else ( false )
        endif
        if (is duplicated transaction) then ( true )
            :add doubled transaction violation to array;
        else ( false )
        endif
        if (array violations != null) then ( true )
            :return a response with violated violations;
        else ( false )
            :execute transaction;
            :save account;
        endif
    endif
endif
:send response via stdout;
stop
@enduml

PlantUML version 1.2021.7(Sun May 23 12:40:07 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>